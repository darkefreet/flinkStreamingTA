<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<configuration>
    <!--PICK ONE SOURCE-->
    <source>
        <name>twitter</name>
        <properties-file>twitter.properties</properties-file>
    </source>
    <!--<source>-->
        <!--<name>bitcoin</name>-->
        <!--<properties-file>bitcoin.properties</properties-file>-->
    <!--</source>-->
    <!--<source>-->
        <!--<name>socket</name>-->
        <!--<ip>localhost</ip>-->
        <!--<port>4542</port>-->
    <!--</source>-->

    <textProcess><!--FOR LSD Calculation purposes-->
        <anyText>true</anyText><!-- true : any text want to be analyzed, false : if there is no text to be analyzed-->
        <dataPath>resource/news/</dataPath><!-- path for documents to make SVD Model-->
        <label>kategori</label><!-- JSON label for the LSD document category-->
        <resource>isi</resource><!-- JSON label for the LSD document resource to build the model -->
        <function>cosine</function><!-- To calculate singular value decomposition. options: "cosine" | "dot" -->
    </textProcess>

    <!--DATA TYPE AND FILTERS-->
    <data>
        <type>json</type>
        <id>id</id>
        <filtersConfiguration>
            <filter>
                <dataType>string</dataType>
                <attribute>lang</attribute>
                <value>in</value>
            </filter>
            <filter>
                <dataType>integer</dataType>
                <attribute>user.friends_count</attribute>
                <value>5</value>
                <comparison>">="</comparison><!--options: ">" | ">=" | "==" | "!=" | "<=" | "<"-->
            </filter>
            <filter>
                <dataType>count</dataType>
                <attribute>entities.hashtags</attribute>
                <value>0</value>
                <comparison>">="</comparison><!--options: ">" | ">=" | "==" | "!=" | "<=" | "<"-->
            </filter>
        </filtersConfiguration>
    </data>

    <!--KEY FOR STREAM DATA-->
    <keyBy>
        <type>static</type>
        <value>1</value>
    </keyBy>
    <!--<keyBy>-->
    <!--<type>object</type>-->
    <!--<function>getId</function>-->
    <!--</keyBy>-->

    <!--DATA MINING CONFIGURATION-->
    <dataMining>
        <processingClass>Streamprocess.WindowProcess.WindowClusteringProcess</processingClass>
        <type>clustering</type>
        <algorithm>dbscan</algorithm>
        <maxDistance>2500.0</maxDistance>
        <minClusters>3</minClusters>
        <distance>euclidean</distance>
        <attributes>
            <attribute>
                <path>text</path>
                <type>text</type><!--options : "text" | "numeric" -->
                <weight>1000.0</weight><!--for standardized attribute weight-->
                <svdFunction>cosine</svdFunction>
            </attribute>
            <attribute>
                <path>user.followers_count</path>
                <type>numeric</type>
                <weight>1.0</weight>
            </attribute>
        </attributes>
        <resultsData>
            <path>text</path>
            <path>user.followers_count</path>
        </resultsData>
    </dataMining>

    <!--WINDOW CONFIGURATION-->
    <window>
        <type>tumbling</type><!--options: tumbling / sliding / session -->
        <time>process</time><!--options: event / process-->
        <size>
            <hours>0</hours>
            <minutes>1</minutes>
            <seconds>0</seconds>
        </size>
        <overlap><!--CAN BE IGNORED IF WINDOW TYPE IS TUMBLING OR SESSION-->
            <hours>0</hours>
            <minutes>0</minutes>
            <seconds>30</seconds>
        </overlap>
    </window>

    <!--SINK CONFIGURATION-->
    <windowSink>
        <type>kafka</type>
        <topic>clustering-text</topic>
        <ipPort>localhost:9092</ipPort>
    </windowSink>
    <!--<windowSink>-->
    <!--<type>print</type>-->
    <!--</windowSink>-->
    <!--<windowSink>-->
    <!--<type>csv</type>-->
    <!--<path>csvOutput</path>-->
    <!--</windowSink>-->
    <!--<windowSink>-->
    <!--<type>text</type>-->
    <!--<path>textOutput</path>-->
    <!--</windowSink>-->
    <!--<windowSink>-->
    <!--<type>socket</type>-->
    <!--<ip>localhost</ip>-->
    <!--<port>4543</port>-->
    <!--</windowSink>-->

</configuration>
